<!--
** Copyright [2013-2015] [Megam Systems]
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
** http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
-->
<% provide(:title, "Sign in") %>
<div class="signin login">
	<!-- BEGIN LOGO -->
	<div class="container">
		<div class="row">
			<div class="logo">
				<%= image_tag "megam-logo1.png" %>
			</div>
		</div>

		<!-- END LOGO -->
		<!-- BEGIN LOGIN -->
		<div class="col-xs-12 col-sm-8 col-md-8 col-lg-7 col-xl-6 col-sm-offset-2 col-md-offset-2 col-lg-offset-2 col-xl-offset-3 outer bg_white border_grey">
			<div class="container">
				<div class="row bottom-divider">
					<div class="col-lg-offset-1 col-md-offset-1 col-lg-10 col-md-10">
						<h2>Login</h2>
					</div>
				</div>
			</div>

			<div class="cover col-lg-offset-1 col-md-offset-1 col-lg-10 col-md-10">
				<!-- BEGIN LOGIN FORM -->
				<%= form_tag sessions_path, multipart: true, :id => "megamform", :class => "sign-form", role: "form", :novalidate => "novalidate", :method => "post", data: { spinlock: "#spin_cross_cloud"}  do %>
				<div class="c_inline">
					<!-- <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
					<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email"> -->
					<div class="form-group">
						<div class="row">
							<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-112">
								<i class="c_ico-excla"></i>
								<%= text_field_tag 'email', nil, :required => true, :class => 'form-control', placeholder: "Email" %>
							</div>
						</div>
					</div>

					<div class="form-group">
						<div class="row">
							<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-112">
								<i class="c_ico-excla"></i>
								<%= password_field_tag 'password', nil, :required => true, :class => 'form-control', placeholder: "Password" %>
							</div>
						</div>
					</div>


					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 footer">
					<% if flash[:error] %>
							<div class="alert alert-danger alert-dismissable">
								<button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
								<strong>Warning!</strong> <%= flash[:error] %>
							</div>
					<% end %>
						</div>
					</div>


					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 footer">
							<div class="row">
								<div  class="col-lg-6 col-md-6 col-sm-6 col-xs-6 tour-btn">
									<span> <a href="signup" id="la-button"><u class="colr-bluegrey">Create new account ? </u></a> </span>
								</div>
								<div  class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pull-right tour-btn">
									<span> <a  data-toggle="modal" href="#forgot_password"  class="pull-right"><u class="colr-denimblue">Forgot password ?</u></a> </span>

								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<div class="row">
								<div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12 tour-btn">

									<button class="btn btn-success btn-plain"><a href="/tour">Take a tour</a></button>
								</div>
								<div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12 pull-right tour-btn">
									<button type="submit" class="btn btn-success btn-plain-green" data-remote="true">Login</button>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							<p class="text-center login-social">
								Login with social media
							</p>
						</div>
					</div>

					<div class="row">
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 social">
							<ul class="list-inline text-center">
								<li>
									<a href="/auth/github" class="github icon" ></a>
								</li>
								<li>
									<a href="/auth/facebook" class="facebook icon"></a>
								</li>
								<li>
									<a href="/auth/google_oauth2" class="google icon"></a>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<% end %>
				<!-- END REGISTRATION FORM -->
			</div>

		</div>
		<div  class="col-xs-12 col-sm-8 col-md-8 col-lg-7 col-xl-6 col-sm-offset-2 col-md-offset-2 col-lg-offset-2 col-xl-offset-3 outer footer-bottom">
			<div class="row">
				<p>
					<a href="http://enixel.com/" target="_blank">Designed by Enixel</a><span class="pull-right"><a href="https://www.megam.io" target="_blank">megam.io</a></span>
				</p>
			</div>
		</div>
		<!-- END LOGIN -->
	</div>
</div>

<!-- Forgot password form modal -->
<div class="modal fade" id="forgot_password" tabindex="-1" role="basic" aria-hidden="true">
	<div class="modal-dialog" style="max-width:400px">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
				<h4 class="modal-title">Forgot password</h4>
			</div>
			<div class="modal-body">
				<div class="scroller" style="min-height:200px" data-always-visible="1" data-rail-visible1="1">
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<%= form_tag password_resets_path, :method => :post, :remote => true, data: { spinlock: '#creating_sshkeys'}  do %>

								<label for="ssh-key_name">Your registered email</label>
								<%= text_field_tag :email, nil, :class => 'form-control', :required => true, placeholder: "Email" %>
							</div>

							<%= submit_tag "Reset Password", :class => "btn btn-success col-md-12 col-xs-12" %>
							<% end %>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="postfinish_reset_password" tabindex="-1" role="basic" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content c_modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
				<h4 class="modal-title">Reset Password</h4>
			</div>
			<div class="modal-body text-center">
				<div>

					<p>
						An email has been sent to your registered email address to reset your password
					</p>
				</div>
			</div>
			<div class="modal-footer c_modal-footer">
				<%= link_to  "Ok", root_path, :class => "btn btn-success", :target => "_self" %>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>

<div class="modal fade" id="postfinish_reset_password_error" tabindex="-1" role="basic" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content c_modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
				<h4 class="modal-title">Reset Password</h4>
			</div>
			<div class="modal-body text-center">
				<div>

					<p>
				<div class="alert alert-danger">
    <strong>Sorry!</strong> Please type a valid email address or create account in megam.
</div> 
					</p>
				</div>
			</div>
			<div class="modal-footer c_modal-footer">
				<%= link_to  "Ok", root_path, :class => "btn btn-success", :target => "_self" %>
			</div>
		</div>
		<!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
</div>
